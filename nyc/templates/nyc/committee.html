{% extends "base.html" %}
{% load staticfiles %}
{% block title %}{{committee.name}}{% endblock %}
{% block content %}

	<div class="row-fluid">
		<div class="col-sm-12">
			<h1>{{committee.name}}</h1>

			<table class='table' id='council-members'>
                <thead>
                    <tr>
                        <th></th>
                        <th>Committee Member</th>
                        <th>District</th>
                        <th>Role</th>
                    </tr>
                </thead>
                <tbody>
                    {% for membership in chairs %}
                        <tr>
                            <td>
                                <img src='{{membership.person.headshot_url}}' alt='{{membership.person.name}}' title='{{membership.person.name}}' class='img-responsive img-thumbnail' />
                            </td>
                            <td>
                                <a href="/person/{{membership.person.slug}}">
                                    {{membership.person.name}}
                                </a>
                            </td>
                            <td>
                                {{membership.person.council_seat}}
                            </td>
                            <td>
                                Chairperson
                            </td>
                        </tr>
                    {% endfor %}
                    {% for membership in memberships %}
                        <tr>
                            <td>
                                <img src='{{membership.person.headshot_url}}' alt='{{membership.person.name}}' title='{{membership.person.name}}' class='img-responsive img-thumbnail' />
                            </td>
                            <td>
                                <a href="/person/{{membership.person.slug}}">
                                    {{membership.person.name}}
                                </a>
                            </td>
                            <td>
                                {{membership.person.council_seat}}
                            </td>
                            <td>
                                Member
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            <h2>Recent Activity</h2>
			{% if committee.recent_activity %}
				
				<ul>
				{% for action in committee.recent_activity %}
					<li>
						<p class="small">{{action.date}}</p>
						<p>{{action.description}}</p>
						<p><a href="/bill-detail/{{action.bill.slug}}">{{action.bill.name}}</a></p>
					</li>
				{% endfor %}
				</ul>
			{% else %}
				<p>No recent activity</p>
			{% endif %}
		</div>
	</div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'js/jquery.dataTables.sorting.js' %}"></script>
    <script src="{% static 'js/dataTables.bootstrap.js' %}"></script>

    <script>
        $("#council-members").DataTable({
            "info": false,
            "searching": false,
            "bLengthChange": false,
            "paging": false,
            "aaSorting": [ [3,'asc'] ],
            "aoColumns": [
                { "bSortable": false },
                null,
                { "sType": "num-html" },
                null
            ]
        });
    </script>
{% endblock %}