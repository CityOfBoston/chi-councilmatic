{% extends "base.html" %}
{% load staticfiles %}
{% block title %}New York City Council Committees{% endblock %}
{% block content %}

	<div class="row-fluid">
		<div class="col-sm-12">
			<h1>New York City Council Committees</h1>
            <p>New York City Council is currently composed of {{committees | length }} Committees, {{subcommittees | length }} Subcommittees and {{taskforces | length }} Task Forces.</p>
			<hr />

            <table class='table' id='committees'>
                <thead>
                    <tr>
                        <th>Committee</th>
                        <th>Chairperson(s)</th>
                        <th>Members</th>
                        <th>Current Legislation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for committee in committees %}
                        <tr>
                            <td>
                                <a href="/committee-detail/{{committee.ocd_id}}">{{ committee.name }}</a>
                            </td>
                            <td>
                                {% for chair in committee.chairs.all %}
                                    <a href='/person/{{chair.person.ocd_id}}'>{{ chair.person.name }}</a><br />
                                {% endfor %}
                            </td>
                            <td>{{ committee.memberships.all | length }}</td>
                            <td>{{ committee.actions.all | length }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            <h2>Subcommittees</h2>
            <table class='table' id='subcommittees'>
                <thead>
                    <tr>
                        <th>Subcommittee</th>
                        <th>Chairperson(s)</th>
                        <th>Members</th>
                        <th>Current Legislation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for committee in subcommittees %}
                        <tr>
                            <td>
                                <a href="/committee-detail/{{committee.ocd_id}}">{{ committee.name }}</a>
                            </td>
                            <td>
                                {% for chair in committee.chairs.all %}
                                    <a href='/person/{{chair.person.ocd_id}}'>{{ chair.person.name }}</a><br />
                                {% endfor %}
                            </td>
                            <td>{{ committee.memberships.all | length }}</td>
                            <td>{{ committee.actions.all | length }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            <h2>Task Forces</h2>
            <table class='table' id='taskforces'>
                <thead>
                    <tr>
                        <th>Task Force</th>
                        <th>Chairperson(s)</th>
                        <th>Members</th>
                        <th>Current Legislation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for committee in taskforces %}
                        <tr>
                            <td>
                                <a href="/committee-detail/{{committee.ocd_id}}">{{ committee.name }}</a>
                            </td>
                            <td>
                                {% for chair in committee.chairs.all %}
                                    <a href='/person/{{chair.person.ocd_id}}'>{{ chair.person.name }}</a><br />
                                {% endfor %}
                            </td>
                            <td>{{ committee.memberships.all | length }}</td>
                            <td>{{ committee.actions.all | length }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
		</div>
	</div>

{% endblock %}
{% block extra_js %}
    <script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'js/jquery.dataTables.sorting.js' %}"></script>
    <script src="{% static 'js/dataTables.bootstrap.js' %}"></script>

    <script>
        $("#committees").DataTable({
            "info": false,
            "searching": false,
            "bLengthChange": false,
            "paging": false,
            "aaSorting": [ [0,'asc'] ],
            "aoColumns": [
                null,
                { "sType": "num-html" },
                null
            ]
        });

        $("#subcommittees").DataTable({
            "info": false,
            "searching": false,
            "bLengthChange": false,
            "paging": false,
            "aaSorting": [ [0,'asc'] ],
            "aoColumns": [
                null,
                { "sType": "num-html" },
                null
            ]
        });

        $("#taskforces").DataTable({
            "info": false,
            "searching": false,
            "bLengthChange": false,
            "paging": false,
            "aaSorting": [ [0,'asc'] ],
            "aoColumns": [
                null,
                { "sType": "num-html" },
                null
            ]
        });
    </script>
{% endblock %}